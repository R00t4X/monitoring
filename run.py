import os
import sys

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω—ã –ª–∏ –º—ã –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
def is_venv():
    return hasattr(sys, 'real_prefix') or (
        hasattr(sys, 'base_prefix') and sys.base_prefix != sys.prefix
    )

def main():
    # –ï—Å–ª–∏ –Ω–µ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏, –∑–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫—É
    if not is_venv():
        print("üîß –ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ")
        print("üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏...")
        
        # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫—É
        try:
            from auto_setup import AutoSetup
            setup = AutoSetup()
            setup.setup_and_run()
        except ImportError:
            print("‚ùå –§–∞–π–ª auto_setup.py –Ω–µ –Ω–∞–π–¥–µ–Ω!")
            print("üì• –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python3 auto_setup.py")
            sys.exit(1)
    else:
        # –ï—Å–ª–∏ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏, –ø—Ä–æ—Å—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º app
        try:
            from app import app
            print("üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...")
            app.run(debug=True, host='127.0.0.1', port=5000)
        except ImportError as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {e}")
            print("üîß –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏")
            sys.exit(1)

if __name__ == '__main__':
    main()
