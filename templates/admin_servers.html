<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ - –ê–¥–º–∏–Ω–∫–∞</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f8f9fa;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .nav a {
            margin-right: 20px;
            color: #007bff;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 4px;
            transition: background 0.3s;
        }
        .nav a:hover { background: #f8f9fa; }
        .main-content { padding: 30px; max-width: 1200px; margin: 0 auto; }
        .add-btn {
            background: #28a745;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
            display: inline-block;
            transition: background 0.3s;
        }
        .add-btn:hover { background: #218838; }
        .servers-table {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; font-weight: bold; }
        .status-online { color: #28a745; font-weight: bold; }
        .status-offline { color: #dc3545; font-weight: bold; }
        .status-warning { color: #ffc107; font-weight: bold; }
        .action-btns { display: flex; gap: 5px; }
        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            transition: background 0.3s;
        }
        .btn-edit { background: #007bff; color: white; }
        .btn-edit:hover { background: #0056b3; }
        .btn-delete { background: #dc3545; color: white; }
        .btn-delete:hover { background: #c82333; }
        .flash-messages { margin-bottom: 20px; }
        .flash-message {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        .flash-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .flash-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üñ•Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞–º–∏</h1>
        <a href="/admin/logout" style="color: white; text-decoration: none;">üö™ –í—ã—Ö–æ–¥</a>
    </div>

    <div class="nav">
        <a href="/admin">üìä Dashboard</a>
        <a href="/admin/servers" style="background: #e9ecef;">üñ•Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞–º–∏</a>
        <a href="/system">üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</a>
        <a href="/">üè† –ì–ª–∞–≤–Ω–∞—è</a>
    </div>

    <div class="main-content">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash-message flash-{{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2>üñ•Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞–º–∏</h2>
            <a href="/admin/servers/add" class="add-btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</a>
        </div>

        <div class="servers-table">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>IP –∞–¥—Ä–µ—Å</th>
                        <th>–ü–æ—Ä—Ç</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>CPU</th>
                        <th>–ü–∞–º—è—Ç—å</th>
                        <th>–î–∏—Å–∫</th>
                        <th>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</th>
                        <th>–û–°</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for server in servers %}
                    <tr>
                        <td>{{ server.id }}</td>
                        <td><strong>{{ server.name }}</strong></td>
                        <td>{{ server.ip }}</td>
                        <td>{{ server.port }}</td>
                        <td>
                            <span class="status-badge status-{{ server.status }}">{{ server.status }}</span>
                        </td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 40px; height: 6px; background: #e9ecef; border-radius: 3px; overflow: hidden;">
                                    <div style="width: {{ server.cpu }}%; height: 100%; background: #007bff; border-radius: 3px;"></div>
                                </div>
                                <span>{{ server.cpu }}%</span>
                            </div>
                        </td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 40px; height: 6px; background: #e9ecef; border-radius: 3px; overflow: hidden;">
                                    <div style="width: {{ server.memory }}%; height: 100%; background: #28a745; border-radius: 3px;"></div>
                                </div>
                                <span>{{ server.memory }}%</span>
                            </div>
                        </td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 40px; height: 6px; background: #e9ecef; border-radius: 3px; overflow: hidden;">
                                    <div style="width: {{ server.disk }}%; height: 100%; background: #ffc107; border-radius: 3px;"></div>
                                </div>
                                <span>{{ server.disk }}%</span>
                            </div>
                        </td>
                        <td>{{ server.location or '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</td>
                        <td>{{ server.os or '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</td>
                        <td>
                            <div class="action-btns">
                                {% if server.id != 0 %}
                                <a href="/admin/servers/{{ server.id }}/edit" class="btn-sm btn-edit" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä">
                                    ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å
                                </a>
                                <form method="POST" action="/admin/servers/{{ server.id }}/delete" style="display: inline;" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–µ—Ä–≤–µ—Ä {{ server.name }}?')">
                                    <button type="submit" class="btn-sm btn-delete" title="–£–¥–∞–ª–∏—Ç—å —Å–µ—Ä–≤–µ—Ä">
                                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                                    </button>
                                </form>
                                {% else %}
                                <span style="color: #6c757d; font-size: 12px;">–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</span>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        {% if not servers %}
        <div style="text-align: center; padding: 40px; color: #6c757d;">
            <h3>üì≠ –°–µ—Ä–≤–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
            <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</p>
            <a href="/admin/servers/add" class="add-btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–µ—Ä</a>
        </div>
        {% endif %}
    </div>
</body>
</html>
